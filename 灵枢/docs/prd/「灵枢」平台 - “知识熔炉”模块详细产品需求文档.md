### **「灵枢」平台 - “知识熔炉”模块详细产品需求文档**

**文档编号**：LS-PRD-FR2
**模块名称**：知识熔炉
**产品定位**：企业异构数据至标准化知识的自动化、工业化“精炼工厂”。
**核心目标**：提供一套可配置、可观测、高可用的流水线系统，将来自任何源头、任何格式的原始数据，持续、自动地转化为符合本体定义、富含语义关联、可直接注入知识图谱的高质量“知识原料”。

---

### **一、 模块全景与核心价值**

#### **1.1 要解决的根本问题**
企业数据价值解锁面临三大瓶颈：**“接不进”**（数据源异构且分散）、**“看不懂”**（非结构化信息难以机器理解）、**“管不好”**（数据质量参差、冲突难解）。传统ETL工具和手动处理无法应对海量、实时、多样的非结构化数据转化需求。

#### **1.2 核心设计理念**
1.  **配置化流水线 (Pipeline-as-Code for Biz)**：将复杂的数据处理逻辑抽象为可视化、可编排的流水线，降低数据工程门槛。
2.  **原子化处理器 (Atomic Processor)**：提供功能单一、可复用的处理器“乐高积木”，通过组合实现复杂处理逻辑。
3.  **全链路可观测 (Full Observability)**：从数据接入到知识产出，每个环节的状态、耗时、质量指标全程透明、可追溯。
4.  **质量内建 (Quality Built-in)**：在加工流程中嵌入可配置的质量检查点，实现“不产出垃圾知识”。

#### **1.3 核心用户角色**
| 角色 | 职责与目标 | 核心使用场景 |
| :--- | :--- | :--- |
| **数据工程师/管理员** | 配置和维护数据源的连接与同步策略，设计并运维加工流水线。 | 创建连接器实例，编排和调试数据处理流水线，监控任务运行状态。 |
| **知识工程师/业务分析师** | 根据业务需求，定义数据应如何被萃取和标签化，关注产出知识的结构与质量。 | 为特定类型文档（如合同、技术报告）配置专用的萃取流水线，定义标签体系和质量规则。 |
| **领域专家 (间接用户)** | 希望其领域的非结构化经验（如会议、邮件）能被系统自动捕获和理解。 | 其参与的会议录音、审批意见等被自动处理，生成可供确认的知识草稿。 |

---

### **二、 详细功能需求**

#### **FR2.1 多源接入管理器**

**目标**：建立与外部数据源的标准化、可管理、可靠的双向连接通道，实现数据的自动“供给”。

| 功能组件 | 详细需求描述 |
| :--- | :--- |
| **1. 连接器仓库与市场** | • **预置连接器库**：提供分类清晰的官方连接器列表，每个连接器有详细的功能说明、配置文档和版本信息。<br>• **连接器生命周期管理**：支持连接器的启用、禁用、升级和回滚。<br>• **自定义连接器开发框架**：提供SDK和模板，允许开发团队封装特有协议或私有系统的连接逻辑，并上架至内部仓库共享。 |
| **2. 数据源实例配置** | • **向导式配置**：选择连接器后，通过表单引导用户填写连接参数（如服务器地址、API密钥、数据库名）。<br>• **同步策略配置**：<br>  &nbsp;&nbsp;- **触发模式**：定时任务（如每日2:00）、事件驱动（如监听文件变化）、手动触发。<br>  &nbsp;&nbsp;- **同步范围**：全量同步、增量同步（基于时间戳、自增ID或日志）。<br>  &nbsp;&nbsp;- **流式接入**：对于消息队列（Kafka）等源，支持持续流式消费。<br>• **元数据与粒度定义**：<br>  &nbsp;&nbsp;- **业务元数据**：为此数据源配置业务所有者、安全等级（如公开、内部、机密）、数据域。<br>  &nbsp;&nbsp;- **处理粒度**：定义最小的、有独立意义的数据单元。例如：<br>    &nbsp;&nbsp;&nbsp;&nbsp;*   Confluence：按“页面”或“博客文章”。<br>    &nbsp;&nbsp;&nbsp;&nbsp;*   会议系统：按“单场会议”。<br>    &nbsp;&nbsp;&nbsp;&nbsp;*   代码仓库：按“合并请求”或“提交”。 |
| **3. 连接监控与运维台** | • **连接健康仪表盘**：全局展示所有数据源实例的连接状态（正常/失败）、最后同步时间、同步数据量趋势。<br>• **同步日志与审计**：提供每次同步任务的详细日志，包括读取记录数、成功/失败详情、错误堆栈，支持检索和导出。<br>• **告警管理**：可配置告警规则（如连接失败、连续同步无新数据），通过集成平台通知负责人。 |

#### **FR2.2 可配置加工流水线设计器**

**目标**：提供一个图形化的“数据工厂”设计平台，让用户能够自由组合处理器，为不同类型的数据量身定制从原始信息到结构化知识的转化流程。

| 功能组件 | 详细需求描述 |
| :--- | :--- |
| **1. 可视化流水线画布** | • **拖拽式编排**：左侧为处理器组件库，右侧为画布。用户可将处理器拖入画布，并通过连线定义数据流向。<br>• **流程控制节点**：提供“条件分支”、“循环”、“并行处理”等控制节点，支持复杂处理逻辑。<br>• **上下文变量**：支持在流水线中定义和使用变量（如将上一步提取的“文档ID”传递给后续所有步骤）。 |
| **2. 核心处理器库（详细规格）** | • **通用文本提取器**：从PDF、Word、PPT、邮件、HTML等格式中提取纯文本和基础元数据。<br>• **音频转文本处理器**：对接语音识别服务，将会议录音、客服录音转为文本，并支持说话人分离。<br>• **实体与关系抽取器**：<br>  &nbsp;&nbsp;- **配置项**：选择要应用的**本体**（如“供应链本体”）。<br>  &nbsp;&nbsp;- **功能**：自动识别文本中属于该本体的实体（如公司、产品名），并根据定义的关系（如“供应”、“合作”）建立实体间的关联。<br>• **自动摘要生成器**：<br>  &nbsp;&nbsp;- **配置项**：摘要风格（要点式、连贯式）、目标长度（字数或比例）。<br>  &nbsp;&nbsp;- **输出**：生成文本摘要，作为知识对象的“概述”属性。<br>• **FAQ自动生成器**：<br>  &nbsp;&nbsp;- **输入**：客服对话记录、技术社区帖子等Q&A形态的文本。<br>  &nbsp;&nbsp;- **功能**：聚类相似问题，提炼标准问法和权威答案，输出结构化FAQ提案。<br>• **多维度标签器**：<br>  &nbsp;&nbsp;- **分类标签**：基于预训练的分类模型打上业务标签（如“合同类型：采购合同”）。<br>  &nbsp;&nbsp;- **情感/倾向标签**：判断文本情感（正面、负面、中性）或态度（支持、反对）。<br>  &nbsp;&nbsp;- **关键词抽取**：提取TF-IDF或基于模型的关键词。<br>  &nbsp;&nbsp;- **质量评分器**：根据完整性、规范性等规则给出初步质量评分（如0-5星）。<br>• **知识切片器**：<br>  &nbsp;&nbsp;- **规则切片**：按固定字数、段落、标题层级切割。<br>  &nbsp;&nbsp;- **语义切片**：利用文本语义分割模型，将长文档（如技术白皮书）按主题切分为多个独立的“知识片段”，每个片段有独立标题和摘要。<br>• **向量化嵌入器**：<br>  &nbsp;&nbsp;- **配置项**：选择嵌入模型（平台预置或自定义上传）。<br>  &nbsp;&nbsp;- **功能**：将文本（全文或摘要）转换为高维向量，输出并存储，供后续语义检索使用。 |
| **3. 处理器管理与实验** | • **处理器版本**：每个处理器有独立版本号，更新时旧版流水线不受影响。<br>• **A/B测试框架**：允许为流水线中的某个处理器设置实验组（使用新模型/参数）和对照组，并对比产出知识在后续应用中的效果指标（如点击率、采纳率）。<br>• **流水线版本与模板**：支持保存流水线为版本，并可发布为“模板”（如“技术文档处理模板”），供其他用户一键复用。 |
| **4. 调试与模拟运行** | • **样本数据调试**：用户可上传或输入一条样本数据，在画布上“单步调试”流水线，实时查看每个处理器的输入、输出和中间状态。<br>• **运行预览**：模拟运行后，最终输出应以清晰的、结构化的形式（如JSON树）展示，模拟其将被注入知识图谱的效果。 |

#### **FR2.3 融合与质量网关**

**目标**：在最终知识入库前，解决多源数据冲突，并执行严格的质量把关，确保知识图谱的洁净与可信。

| 功能组件 | 详细需求描述 |
| :--- | :--- |
| **1. 实体融合与冲突解决引擎** | • **融合规则配置**：当不同流水线产出关于**同一实体**（如根据唯一ID或强特征判定）的知识时，触发融合规则：<br>  &nbsp;&nbsp;- **优先级策略**：按数据源权威性（如“官方文档>个人笔记”）设置优先级。<br>  &nbsp;&nbsp;- **时间衰减策略**：越新的信息权重越高。<br>  &nbsp;&nbsp;- **投票策略**：多个独立来源均确认的信息更可信。<br>  &nbsp;&nbsp;- **人工仲裁队列**：无法自动解决的冲突（如重要属性矛盾），生成仲裁任务转交领域专家。<br>• **融合过程可视化**：提供融合前后数据对比视图，让用户理解系统是如何做出融合决策的。 |
| **2. 可配置质量校验规则引擎** | • **质量规则库**：支持创建和复用质量规则，规则类型包括：<br>  &nbsp;&nbsp;- **完整性规则**：关键属性（如标题、作者）缺失率不能超过阈值。<br>  &nbsp;&nbsp;- **逻辑一致性规则**：知识内容不与已定的本体业务规则冲突（如“项目的结束日期不能早于开始日期”）。<br>  &nbsp;&nbsp;- **格式规范规则**：符合特定正则表达式（如电话号码格式）。<br>• **质检点配置**：可在流水线末端或融合后设置质检点，绑定一组质量规则。<br>• **质检结果处理**：<br>  &nbsp;&nbsp;- **自动拦截**：严重质量问题（如违反核心业务规则）直接拦截，打回并告警。<br>  &nbsp;&nbsp;- **打标降级**：一般性问题（如缺少可选标签）自动打上“质量待改进”标签，仍可入库但权重降低。<br>  &nbsp;&nbsp;- **人工复审队列**：疑似问题转入人工复审列表，由知识审核员处理。 |
| **3. 质量监控报告** | • **全局质量看板**：统计展示知识原料的入库通过率、主要质量问题分布、各数据源的质量趋势。<br>• **质量溯源**：对于任一被拦截或降级的知识，可一键查看触发了哪条质量规则，以及该知识的完整加工路径。 |

---

### **三、 核心业务流程示例**

**流程：自动处理一场产品设计评审会议**
1.  **接入**：**多源接入管理器**中的“会议系统”连接器，在会议结束后自动抓取信息：会议元数据、录音文件、共享的PPT、会议纪要文档。
2.  **加工**：触发为“设计评审会议”预置的**加工流水线**：
    *   **音频转文本**：处理录音，输出带发言人标识的文本。
    *   **文本提取**：处理PPT和纪要文档。
    *   **实体与关系抽取**：应用“产品研发本体”，识别出讨论的“功能模块A”、“技术难点B”、“决策：采用方案C”等实体和决策关系。
    *   **摘要生成**：生成会议核心结论摘要。
    *   **知识切片**：将会议记录按讨论的议题点，切分成多个决策片段。
    *   **向量化**：为每个片段生成向量。
3.  **融合与质检**：
    *   **融合**：将音频文本中提取的决策与纪要文档中的描述进行融合，取纪要的精确描述为主，补充音频中的讨论背景。
    *   **质检**：通过“核心决策必须有明确负责人”规则校验。若通过，所有片段作为独立知识原料，与“会议”这个父节点关联，准备注入图谱。
4.  **产出**：一系列结构化、可检索、可关联的“会议决策知识片段”进入动态知识图谱，可供后续项目查询和复盘。

---
**文档状态**：`评审中`
**下一步**：本PRD确认后，需与FR1（本体论工厂）就实体抽取规则进行对接联调，并与FR3（动态知识图谱）明确知识原料的输出格式与注入协议。